require('../settings')
const express = require('express')
const app = express()
var path = require('path')
var cookieParser = require('cookie-parser')
cors = require('cors')

var main = require('../routes/main')
var api = require('../routes/api')

app.set('trust proxy', true)
app.set('json spaces', 2)
app.use(cors())
app.use(cookieParser())
app.use(express.static(path.join(__dirname, '../public')))
app.use('/', main)
app.use('/api', api)

// Sin app.listen() â€” Vercel lo maneja solo
module.exports = app